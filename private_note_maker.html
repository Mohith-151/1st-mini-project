<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project Diary | Private Notebook</title>
    <link rel="icon" href="favicon.ico.png" type="image/x-icon">
    <link rel="shortcut icon" href="favicon.ico.png" type="image/x-icon">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #6366f1;
            --primary-light: #818cf8;
            --dark: #0f172a;
            --light: #f8fafc;
        }
        
        [data-theme="dark"] {
            --bg-primary: #0f172a;
            --bg-secondary: #1e293b;
            --text-primary: #f8fafc;
            --text-secondary: #94a3b8;
            --border-color: #334155;
        }
        
        [data-theme="light"] {
            --bg-primary: #ffffff;
            --bg-secondary: #f1f5f9;
            --text-primary: #0f172a;
            --text-secondary: #64748b;
            --border-color: #e2e8f0;
        }
        
        body {
            background-color: var(--bg-primary);
            color: var(--text-primary);
            transition: all 0.3s ease;
            min-height: 100vh;
        }
        
        .card {
            background-color: var(--bg-secondary);
            border: 1px solid var(--border-color);
            transition: all 0.3s ease;
        }
        
        .card:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }
        
        .timeline-item::before {
            content: '';
            position: absolute;
            left: -20px;
            top: 0;
            width: 2px;
            height: 100%;
            background-color: var(--primary);
        }
        
        .timeline-dot {
            position: absolute;
            left: calc(-20px - 6px);
            top: 8px;
            width: 14px;
            height: 14px;
            border-radius: 50%;
            background-color: var(--primary);
            border: 3px solid var(--bg-secondary);
        }
        
        #editor {
            min-height: 200px;
            border: 1px solid var(--border-color);
        }
        
        .ql-toolbar {
            border-color: var(--border-color) !important;
        }
    </style>
</head>
<body data-theme="dark" class="transition-colors duration-300">
    <div class="container mx-auto px-4 py-8 max-w-6xl">
        <!-- Header -->
        <header class="flex justify-between items-center mb-8">
            <h1 class="text-3xl font-bold">
                <i class="fas fa-book-open mr-2 text-indigo-500"></i>
                Project Diary
            </h1>
            <div class="flex items-center space-x-4">
                <button id="themeToggle" class="p-2 rounded-full bg-gray-200 dark:bg-gray-700">
                    <i class="fas fa-moon dark:hidden"></i>
                    <i class="fas fa-sun hidden dark:inline"></i>
                </button>
                <button id="newEntryBtn" class="bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-lg flex items-center">
                    <i class="fas fa-plus mr-2"></i>
                    New Entry
                </button>
            </div>
        </header>
        
        <!-- Main Content -->
        <div class="grid grid-cols-1 lg:grid-cols-4 gap-6">
            <!-- Sidebar -->
            <div class="lg:col-span-1">
                <div class="card p-4 rounded-lg sticky top-8">
                    <div class="mb-4">
                        <input type="text" id="searchInput" placeholder="Search entries..." class="w-full p-2 rounded border border-gray-300 dark:border-gray-600 bg-transparent">
                    </div>
                    <div class="mb-4">
                        <label class="block text-sm font-medium mb-1">Projects</label>
                        <select id="projectFilter" class="w-full p-2 rounded border border-gray-300 dark:border-gray-600 bg-transparent">
                            <option value="">All Projects</option>
                            <option value="work">Work</option>
                            <option value="personal">Personal</option>
                            <option value="study">Study</option>
                        </select>
                    </div>
                    <hr class="my-4 border-gray-200 dark:border-gray-700">
                    <h3 class="font-semibold mb-2">Recent Entries</h3>
                    <ul id="entryList" class="space-y-2 max-h-96 overflow-y-auto">
                        <!-- Entries will be populated here -->
                    </ul>
                </div>
            </div>
            
            <!-- Main Editor/Viewer -->
            <div class="lg:col-span-3">
                <div id="emptyState" class="card p-8 rounded-lg text-center">
                    <h3 class="text-xl font-semibold mb-2">Your diary is empty</h3>
                    <p class="text-gray-500 dark:text-gray-400 mb-4">Create your first entry to start documenting your projects</p>
                    <button id="createFirstEntry" class="bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-lg inline-flex items-center">
                        <i class="fas fa-plus mr-2"></i>
                        Create Entry
                    </button>
                </div>
                
                <div id="entryForm" class="hidden card p-6 rounded-lg">
                    <div class="flex justify-between items-center mb-4">
                        <input type="text" id="entryTitle" placeholder="Entry Title" class="text-2xl font-bold bg-transparent border-b border-gray-300 dark:border-gray-600 pb-1 w-full focus:outline-none focus:border-indigo-500">
                        <button id="saveEntry" class="bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-lg ml-4">
                            Save
                        </button>
                    </div>
                    <div class="grid grid-cols-2 gap-4 mb-4">
                        <div>
                            <label class="block text-sm font-medium mb-1">Date</label>
                            <input type="date" id="entryDate" class="w-full p-2 rounded border border-gray-300 dark:border-gray-600 bg-transparent">
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-1">Project</label>
                            <select id="entryProject" class="w-full p-2 rounded border border-gray-300 dark:border-gray-600 bg-transparent">
                                <option value="work">Work</option>
                                <option value="personal">Personal</option>
                                <option value="study">Study</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                    </div>
                    <div id="editor"></div>
                    <div class="mt-4">
                        <label class="block text-sm font-medium mb-1">Attachments</label>
                        <div class="border border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-4 text-center">
                            <i class="fas fa-cloud-upload-alt text-2xl text-gray-400 mb-2"></i>
                            <p class="text-sm text-gray-500 dark:text-gray-400">Drop files here or click to upload</p>
                            <input type="file" id="fileInput" class="hidden">
                        </div>
                        <div id="attachmentPreview" class="mt-2 flex flex-wrap gap-2"></div>
                    </div>
                </div>
                
                <div id="entryView" class="hidden card p-6 rounded-lg">
                    <div class="flex justify-between items-start mb-6">
                        <div>
                            <h2 id="viewTitle" class="text-2xl font-bold mb-1"></h2>
                            <div class="flex items-center text-sm text-gray-500 dark:text-gray-400 space-x-4">
                                <span id="viewDate"></span>
                                <span class="px-2 py-1 rounded-full text-xs bg-indigo-100 dark:bg-indigo-900 text-indigo-800 dark:text-indigo-200" id="viewProject"></span>
                            </div>
                        </div>
                        <div class="flex space-x-2">
                            <button id="editEntry" class="p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button id="deleteEntry" class="p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 text-red-500">
                                <i class="fas fa-trash-alt"></i>
                            </button>
                        </div>
                    </div>
                    <div id="viewContent" class="prose dark:prose-invert max-w-none">
                        <!-- Entry content will be rendered here -->
                    </div>
                    <div id="viewAttachments" class="mt-6">
                        <h3 class="font-medium mb-2">Attachments</h3>
                        <div id="attachmentList" class="grid grid-cols-2 md:grid-cols-3 gap-2"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Quill Rich Text Editor -->
    <script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>
    <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize theme
            const currentTheme = localStorage.getItem('theme') || 'dark';
            document.body.setAttribute('data-theme', currentTheme);
            
            // Theme toggle
            document.getElementById('themeToggle').addEventListener('click', function() {
                const newTheme = document.body.getAttribute('data-theme') === 'dark' ? 'light' : 'dark';
                document.body.setAttribute('data-theme', newTheme);
                localStorage.setItem('theme', newTheme);
            });
            
            // Initialize Quill editor
            const quill = new Quill('#editor', {
                theme: 'snow',
                modules: {
                    toolbar: [
                        [{ 'header': [1, 2, 3, false] }],
                        ['bold', 'italic', 'underline', 'strike'],
                        [{ 'list': 'ordered'}, { 'list': 'bullet' }],
                        ['link', 'image'],
                        ['clean']
                    ]
                },
                placeholder: 'Write your entry here...'
            });
            
            // Load entries from localStorage
            let entries = JSON.parse(localStorage.getItem('projectDiaryEntries')) || [];
            let currentEntryId = null;
            
            // DOM elements
            const emptyState = document.getElementById('emptyState');
            const entryForm = document.getElementById('entryForm');
            const entryView = document.getElementById('entryView');
            const entryList = document.getElementById('entryList');
            const searchInput = document.getElementById('searchInput');
            const projectFilter = document.getElementById('projectFilter');
            
            // New entry button
            document.getElementById('newEntryBtn').addEventListener('click', showNewEntryForm);
            document.getElementById('createFirstEntry').addEventListener('click', showNewEntryForm);
            
            function showNewEntryForm() {
                emptyState.classList.add('hidden');
                entryView.classList.add('hidden');
                entryForm.classList.remove('hidden');
                
                // Reset form
                document.getElementById('entryTitle').value = '';
                document.getElementById('entryDate').valueAsDate = new Date();
                document.getElementById('entryProject').value = 'work';
                quill.root.innerHTML = '';
                document.getElementById('attachmentPreview').innerHTML = '';
                currentEntryId = null;
            }
            
            // Save entry
            document.getElementById('saveEntry').addEventListener('click', function() {
                const title = document.getElementById('entryTitle').value.trim();
                const date = document.getElementById('entryDate').value;
                const project = document.getElementById('entryProject').value;
                const content = quill.root.innerHTML;
                
                if (!title) {
                    alert('Please enter a title');
                    return;
                }
                
                const entry = {
                    id: currentEntryId || Date.now().toString(),
                    title,
                    date,
                    project,
                    content,
                    attachments: []
                };
                
                if (currentEntryId) {
                    // Update existing entry
                    const index = entries.findIndex(e => e.id === currentEntryId);
                    if (index !== -1) {
                        entries[index] = entry;
                    }
                } else {
                    // Add new entry
                    entries.unshift(entry);
                }
                
                saveEntries();
                renderEntryList();
                viewEntry(entry.id);
            });
            
            // Edit entry
            document.getElementById('editEntry').addEventListener('click', function() {
                const entry = entries.find(e => e.id === currentEntryId);
                if (entry) {
                    emptyState.classList.add('hidden');
                    entryView.classList.add('hidden');
                    entryForm.classList.remove('hidden');
                    
                    document.getElementById('entryTitle').value = entry.title;
                    document.getElementById('entryDate').value = entry.date;
                    document.getElementById('entryProject').value = entry.project;
                    quill.root.innerHTML = entry.content;
                }
            });
            
            // Delete entry
            document.getElementById('deleteEntry').addEventListener('click', function() {
                if (confirm('Are you sure you want to delete this entry?')) {
                    entries = entries.filter(e => e.id !== currentEntryId);
                    saveEntries();
                    renderEntryList();
                    
                    if (entries.length === 0) {
                        emptyState.classList.remove('hidden');
                        entryView.classList.add('hidden');
                    } else {
                        viewEntry(entries[0].id);
                    }
                }
            });
            
            // View an entry
            function viewEntry(id) {
                const entry = entries.find(e => e.id === id);
                if (entry) {
                    currentEntryId = entry.id;
                    emptyState.classList.add('hidden');
                    entryForm.classList.add('hidden');
                    entryView.classList.remove('hidden');
                    
                    document.getElementById('viewTitle').textContent = entry.title;
                    document.getElementById('viewDate').textContent = formatDate(entry.date);
                    document.getElementById('viewProject').textContent = entry.project.charAt(0).toUpperCase() + entry.project.slice(1);
                    document.getElementById('viewContent').innerHTML = entry.content;
                    
                    // Highlight in the list
                    const items = entryList.querySelectorAll('li');
                    items.forEach(item => {
                        item.classList.remove('bg-indigo-500', 'text-white');
                        if (item.dataset.id === id) {
                            item.classList.add('bg-indigo-500', 'text-white');
                        }
                    });
                }
            }
            
            // Format date
            function formatDate(dateString) {
                const options = { year: 'numeric', month: 'long', day: 'numeric' };
                return new Date(dateString).toLocaleDateString(undefined, options);
            }
            
            // Save entries to localStorage
            function saveEntries() {
                localStorage.setItem('projectDiaryEntries', JSON.stringify(entries));
            }
            
            // Render entry list
            function renderEntryList(filter = '', project = '') {
                entryList.innerHTML = '';
                
                let filteredEntries = entries;
                
                if (filter) {
                    filteredEntries = filteredEntries.filter(entry => 
                        entry.title.toLowerCase().includes(filter.toLowerCase()) || 
                        entry.content.toLowerCase().includes(filter.toLowerCase())
                    );
                }
                
                if (project) {
                    filteredEntries = filteredEntries.filter(entry => entry.project === project);
                }
                
                if (filteredEntries.length === 0) {
                    entryList.innerHTML = '<li class="text-center py-4 text-gray-500">No entries found</li>';
                    return;
                }
                
                filteredEntries.forEach(entry => {
                    const li = document.createElement('li');
                    li.className = 'cursor-pointer p-2 rounded hover:bg-gray-200 dark:hover:bg-gray-700 transition';
                    li.dataset.id = entry.id;
                    
                    li.innerHTML = `
                        <h4 class="font-medium truncate">${entry.title}</h4>
                        <div class="flex justify-between items-center text-xs text-gray-500 dark:text-gray-400">
                            <span>${formatDate(entry.date)}</span>
                            <span class="px-1 py-0.5 rounded-full text-xs bg-indigo-100 dark:bg-indigo-900 text-indigo-800 dark:text-indigo-200">
                                ${entry.project.charAt(0).toUpperCase() + entry.project.slice(1)}
                            </span>
                        </div>
                    `;
                    
                    li.addEventListener('click', () => viewEntry(entry.id));
                    entryList.appendChild(li);
                });
                
                // Highlight current entry
                if (currentEntryId) {
                    const currentLi = entryList.querySelector(`li[data-id="${currentEntryId}"]`);
                    if (currentLi) {
                        currentLi.classList.add('bg-indigo-500', 'text-white');
                    }
                }
            }
            
            // Initial render
            if (entries.length > 0) {
                emptyState.classList.add('hidden');
                entryForm.classList.add('hidden');
                viewEntry(entries[0].id);
            }
            renderEntryList();
            
            // Search and filter
            searchInput.addEventListener('input', function() {
                renderEntryList(this.value, projectFilter.value);
            });
            
            projectFilter.addEventListener('change', function() {
                renderEntryList(searchInput.value, this.value);
            });
            
            // File upload
            document.querySelector('#entryForm .border-dashed').addEventListener('click', function() {
                document.getElementById('fileInput').click();
            });
            
            document.getElementById('fileInput').addEventListener('change', function(e) {
                if (e.target.files.length > 0) {
                    const file = e.target.files[0];
                    const reader = new FileReader();
                    
                    reader.onload = function(event) {
                        const preview = document.createElement('div');
                        preview.className = 'border rounded p-2 text-center w-24';
                        preview.innerHTML = `
                            <i class="fas fa-file text-2xl mb-1"></i>
                            <p class="text-xs truncate">${file.name}</p>
                        `;
                        document.getElementById('attachmentPreview').appendChild(preview);
                        
                        // Note: In a real app, you would save the file data
                    };
                    
                    reader.readAsDataURL(file);
                }
            });
        });
    </script>
</body>
</html>

